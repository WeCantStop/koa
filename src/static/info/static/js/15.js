webpackJsonp([15],{ND92:function(t,e){},ToBn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),l=i.n(a),n=i("t5DY"),o=i("myXI"),r={data:function(){return{list:[],ruleList:[],showDialog:!1,subForm:{name:"",quantity:""},quantityList:[0,1,2,3,4,5,6,7,8,9,10],formValidate:{name:{required:!0,message:"请选择规则名",trigger:"blur"},quantity:{required:!0,message:"请选择显示条数",trigger:"blur"}}}},created:function(){this.initData(),this.getListRuleName()},methods:{initData:function(){var t=this;Object(n.a)(o.getSortRuleList).then(function(e){t.list=e.result})},getListRuleName:function(){var t=this;Object(n.a)(o.getRuleList).then(function(e){t.ruleList=e.result})},delRule:function(t){var e=this;this.$confirm("确定删除该规则?","提示",{}).then(function(i){Object(n.a)(o.deleteInfoSortRule,{id:t}).then(function(t){e.initData()})}).catch(function(){})},sortRule:function(t,e){var i=this;Object(n.a)(o.updateSort,{id:t.id,sort:t.sort,optType:e}).then(function(t){i.initData()})},handleShowDialog:function(t){t&&(this.subForm=l()({},t)),this.showDialog=!0},validateForm:function(){var t=!1;return this.$refs.form.validate(function(e){e&&(t=!0)}),t},saveOrUpdae:function(){var t=this;if(!this.validateForm())return!1;Object(n.a)(o.saveOrUpdateInfoSortRule,this.subForm).then(function(e){t.initData(),t.hideDialog()})},hideDialog:function(){this.showDialog=!1,this.$refs.form.clearValidate(),this.subForm={name:"",quantity:""}}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("za-page-content",{attrs:{header:"信息流规则管理",scroll:"true"}},[i("za-table",{ref:"table",attrs:{data:t.list}},[i("el-row",{staticStyle:{"margin-top":"10px"},attrs:{slot:"searchBar"},slot:"searchBar"},[i("el-button",{attrs:{size:"medium",icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:t.handleShowDialog}},[t._v("新增规则")])],1),t._v(" "),i("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"规则ID"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"规则名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"quantity",label:"显示条数"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!==t.list.length&&0!==e.$index?i("el-button",{staticClass:"handle-up-btn",attrs:{icon:"el-icon-arrow-up",type:"primary"},on:{click:function(i){t.sortRule(e.row,"up")}}}):t._e(),t._v(" "),e.$index!==t.list.length-1?i("el-button",{staticClass:"handle-up-btn",attrs:{icon:"el-icon-arrow-down",type:"primary"},on:{click:function(i){t.sortRule(e.row,"down")}}}):t._e(),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.handleShowDialog(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.delRule(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-dialog",{attrs:{title:"新建规则",visible:t.showDialog,width:"450px"},on:{"update:visible":function(e){t.showDialog=e},close:t.hideDialog}},[i("el-form",{ref:"form",attrs:{model:t.subForm,rules:t.formValidate,"label-position":"left","label-width":"100px"}},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"规则名称",prop:"name"}},[i("el-col",{attrs:{span:20}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择规则名称"},model:{value:t.subForm.name,callback:function(e){t.$set(t.subForm,"name",e)},expression:"subForm.name"}},t._l(t.ruleList,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}))],1)],1)],1),t._v(" "),i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"显示条数",prop:"quantity"}},[i("el-col",{attrs:{span:20}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"显示条数"},model:{value:t.subForm.quantity,callback:function(e){t.$set(t.subForm,"quantity",e)},expression:"subForm.quantity"}},t._l(t.quantityList,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}))],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"30px","text-align":"center"}},[i("el-button",{on:{click:t.hideDialog}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.saveOrUpdae}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(r,s,!1,function(t){i("ND92")},"data-v-213e12c1",null);e.default=u.exports}});
//# sourceMappingURL=15.js.map