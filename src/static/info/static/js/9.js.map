{"version":3,"sources":["webpack:///src/views/target/index.vue","webpack:///./src/views/target/index.vue?ae9f","webpack:///./src/views/target/index.vue"],"names":["target","getOption","getColumn","getList","_this","this","result","_this2","value","id","directoryName","obj","res","labelName","_this3","pageNum","pageSize","then","data","list","total","_this4","pass","subForm","params","cancelDialog","returnMsg","_this5","key","openDialog","_this6","editTargetId","_this7","_this8","page","clearValidate","selection","views_target","render","_vm","_h","$createElement","_c","_self","attrs","header","ref","highlight-current-row","on","action-change","changePage","selection-change","handleSelectionChange","staticClass","slot","size","type","click","addNewTarget","_v","prop","label","width","scopedSlots","_u","fn","scope","_l","row","item","index","_s","$event","dowork","editTarget","deleteTarget","title","visible","dialogVisiblePage","update:visible","close","hideDialog","model","rules","formValidate","label-position","label-width","align","staticStyle","span","callback","$$v","$set","expression","placeholder","multiple","filterable","allow-create","default-first-option","labelIdValue","margin-top","saveTarget","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/9.js","sourcesContent":["<template>\n\t<za-page-content header=\"爬虫目标管理\">\n\t\t<za-table ref=\"table\" :data=\"list\" @action-change=\"changePage\" highlight-current-row :total=\"total\"\n\t\t\t\t  @selection-change=\"handleSelectionChange\">\n\t\t\t<el-row slot=\"searchBar\" class=\"targetTit\">\n\t\t\t\t<el-button size=\"medium\" @click=\"addNewTarget\" type=\"success\">添加爬虫目标</el-button>\n\t\t\t</el-row>\n\t\t\t<el-table-column prop=\"targetUrl\" label=\"爬取目标\"></el-table-column>\n\t\t\t<el-table-column label=\"爬取标签\" width=\"300\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<span v-for=\"(item, index) in scope.row.labelList\" :key=\"index\">{{item.labelName}},</span>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"操作\" width=\"280\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"dowork(scope.row)\">立即爬取</el-button>\n\t\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"editTarget(scope.row)\">编辑</el-button>\n\t\t\t\t\t<el-button size=\"mini\" type=\"danger\" @click=\"deleteTarget(scope.row)\">删除</el-button>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t</za-table>\n\t\t<el-dialog\n\t\t\ttitle=\"添加爬虫目标\"\n\t\t\t:visible.sync=\"dialogVisiblePage\"\n\t\t\t@close=\"hideDialog\"\n\t\t\twidth=\"40%\">\n\t\t\t<el-row>\n\t\t\t\t<el-form :model=\"subForm\" ref=\"form\" :rules=\"formValidate\" label-position=\"left\" label-width=\"120px\">\n\t\t\t\t\t<el-row>\n\t\t\t\t\t\t<el-row type=\"flex\" align=\"middle\">\n\t\t\t\t\t\t\t<el-form-item label=\"目标名称\" prop=\"targetName\" style=\"width: 100%\">\n\t\t\t\t\t\t\t\t<el-col :span=\"20\">\n\t\t\t\t\t\t\t\t\t<el-input v-model=\"subForm.targetName\"></el-input>\n\t\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-row>\n\t\t\t\t\t\t<el-row type=\"flex\" align=\"middle\">\n\t\t\t\t\t\t\t<el-form-item label=\"目标url\" prop=\"targetUrl\" style=\"width: 100%\">\n\t\t\t\t\t\t\t\t<el-col :span=\"20\">\n\t\t\t\t\t\t\t\t\t<el-input v-model=\"subForm.targetUrl\"></el-input>\n\t\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-row>\n\t\t\t\t\t\t<el-row type=\"flex\" align=\"middle\">\n\t\t\t\t\t\t\t<el-form-item label=\"目标类型\" prop=\"targetType\" style=\"width: 100%\">\n\t\t\t\t\t\t\t\t<el-col :span=\"20\">\n\t\t\t\t\t\t\t\t\t<el-select style=\"width:100%\" v-model=\"subForm.targetType\" placeholder=\"请选择\">\n\t\t\t\t\t\t\t\t\t\t<el-option\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"item in options1\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"item.value\"\n\t\t\t\t\t\t\t\t\t\t\t:label=\"item.label\"\n\t\t\t\t\t\t\t\t\t\t\t:value=\"item.value\">\n\t\t\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-row>\n\t\t\t\t\t\t<el-row type=\"flex\" align=\"middle\">\n\t\t\t\t\t\t\t<el-form-item label=\"抓取下一页\" prop=\"hasNext\" style=\"width: 100%\">\n\t\t\t\t\t\t\t\t<el-col :span=\"20\">\n\t\t\t\t\t\t\t\t\t<el-select style=\"width:100%\" v-model=\"subForm.hasNext\" placeholder=\"请选择\">\n\t\t\t\t\t\t\t\t\t\t<el-option\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"item in options2\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"item.value\"\n\t\t\t\t\t\t\t\t\t\t\t:label=\"item.label\"\n\t\t\t\t\t\t\t\t\t\t\t:value=\"item.value\">\n\t\t\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-row>\n\t\t\t\t\t\t<el-row type=\"flex\" align=\"middle\">\n\t\t\t\t\t\t\t<el-form-item label=\"标签\" prop=\"labelIdValue\" style=\"width: 100%\">\n\t\t\t\t\t\t\t\t<el-col :span=\"20\">\n\t\t\t\t\t\t\t\t\t<el-select v-model=\"labelIdValue\"\n\t\t\t\t\t\t\t\t\t\t\t   multiple\n\t\t\t\t\t\t\t\t\t\t\t   filterable\n\t\t\t\t\t\t\t\t\t\t\t   allow-create\n\t\t\t\t\t\t\t\t\t\t\t   default-first-option\n\t\t\t\t\t\t\t\t\t\t\t   placeholder=\"请选择\" style=\"width: 100%\">\n\t\t\t\t\t\t\t\t\t\t<el-option\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"item in tagOptions\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"item.value\"\n\t\t\t\t\t\t\t\t\t\t\t:label=\"item.label\"\n\t\t\t\t\t\t\t\t\t\t\t:value=\"item.value\">\n\t\t\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-row>\n\t\t\t\t\t\t<el-row type=\"flex\" align=\"middle\">\n\t\t\t\t\t\t\t<el-form-item label=\"栏目编号\" prop=\"directoryId\" style=\"width: 100%\">\n\t\t\t\t\t\t\t\t<el-col :span=\"20\">\n\t\t\t\t\t\t\t\t\t<el-select style=\"width:100%\" v-model=\"subForm.directoryId\" placeholder=\"请选择\">\n\t\t\t\t\t\t\t\t\t\t<el-option\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"item in colmnOptions\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"item.value\"\n\t\t\t\t\t\t\t\t\t\t\t:label=\"item.label\"\n\t\t\t\t\t\t\t\t\t\t\t:value=\"item.value\">\n\t\t\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-row>\n\t\t\t\t\t</el-row>\n\t\t\t\t\t<div class=\"dialog-footer\" style=\"margin-top: 30px;\">\n\t\t\t\t\t\t<el-button @click=\"cancelDialog\">取 消</el-button>\n\t\t\t\t\t\t<el-button @click=\"saveTarget\" type=\"primary\">确 定</el-button>\n\t\t\t\t\t</div>\n\t\t\t\t</el-form>\n\t\t\t</el-row>\n\t\t</el-dialog>\n\t</za-page-content>\n</template>\n\n<script>\n\timport {ajaxGetCommon, ajaxPostCommon} from '../../api/common.js'\n\timport * as ajaxUrl from '../../api/url'\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tformValidate: {\n\t\t\t\t\ttargetName: {required: true, message: '请输入爬取目标名称', trigger: 'blur'},\n\t\t\t\t\ttargetUrl: {required: true, message: '请输入爬取目标url', trigger: 'blur'},\n\t\t\t\t\ttargetType: {required: true, message: '请输入目标类型', trigger: 'blur'},\n\t\t\t\t\t//labelIdValue: {required: true, message: '请输入标签编号', trigger: 'blur'},\n\t\t\t\t\tdirectoryId: {required: true, message: '请输入栏目编号', trigger: 'blur'}\n\t\t\t\t},\n\t\t\t\toptions1: [{\n\t\t\t\t\tvalue: 'search',\n\t\t\t\t\tlabel: '搜索'\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'list',\n\t\t\t\t\tlabel: '列表'\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'article',\n\t\t\t\t\tlabel: '内容'\n\t\t\t\t}],\n\t\t\t\toptions2: [{\n\t\t\t\t\tvalue: '1',\n\t\t\t\t\tlabel: '抓取'\n\t\t\t\t}, {\n\t\t\t\t\tvalue: '0',\n\t\t\t\t\tlabel: '不抓取'\n\t\t\t\t}],\n\t\t\t\tlabelIdValue: [],\n\t\t\t\teditTargetId: null,\n\t\t\t\tsubForm: {\n\t\t\t\t\ttargetName: '',\n\t\t\t\t\ttargetUrl: '',\n\t\t\t\t\ttargetType: '',\n\t\t\t\t\thasNext: '',\n\t\t\t\t\tlabelIdList: '',\n\t\t\t\t\tdirectoryId: '',\n\t\t\t\t},\n\t\t\t\tdialogVisiblePage: false,\n\n\t\t\t\ttagOptions: [],\n\t\t\t\tcolmnOptions: [],\n\t\t\t\tlist: [],\n\t\t\t\ttotal: 1,\n\t\t\t\tpageNum: 1,\n\t\t\t\tpageSize: 10,\n\t\t\t};\n\t\t},\n\t\tmounted() {\n\t\t\tthis.getOption();\n\t\t\tthis.getColumn();\n\t\t\tthis.getList();\n\t\t},\n\t\tmethods: {\n\t\t\tgetColumn () {\n\t\t\t\tajaxPostCommon(ajaxUrl.listInfoDirectory, {pageNum: 1, pageSize: 50}).then((data) => {\n\t\t\t\t\tif (data.returnCode === '200') {\n\t\t\t\t\t\tthis.colmnOptions = this.formateCate2(data.result);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetOption() {\n\t\t\t\tajaxPostCommon(ajaxUrl.getLabels).then((data) => {\n\t\t\t\t\tif (data.returnCode === '200') {\n\t\t\t\t\t\tthis.tagOptions = this.formateCate(data.result);\n\t\t\t\t\t\tthis.cate = this.tagOptions[0].value;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tformateCate2(data) {\n\t\t\t\tlet res = [];\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tlet obj = {\n\t\t\t\t\t\tvalue: item.id,\n\t\t\t\t\t\tlabel: item.directoryName\n\t\t\t\t\t};\n\t\t\t\t\tres.push(obj)\n\t\t\t\t});\n\t\t\t\treturn res;\n\t\t\t},\n\t\t\tformateCate(data) {\n\t\t\t\tlet res = [];\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tlet obj = {\n\t\t\t\t\t\tvalue: item.id,\n\t\t\t\t\t\tlabel: item.labelName\n\t\t\t\t\t};\n\t\t\t\t\tres.push(obj)\n\t\t\t\t});\n\t\t\t\treturn res;\n\t\t\t},\n\t\t\tgetList() {\n\t\t\t\tajaxPostCommon(ajaxUrl.pageCrawlerList, {\n\t\t\t\t\tpageNum: this.pageNum,\n\t\t\t\t\tpageSize: this.pageSize\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tif (data.returnCode === '200') {\n\t\t\t\t\t\tthis.list = data.result.list;\n\t\t\t\t\t\tthis.total = data.result.total;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tsaveTarget() {\n\t\t\t\tlet validatePass = false;\n\t\t\t\tthis.$refs.form.validate(pass => {\n\t\t\t\t\tconsole.log(pass)\n\t\t\t\t\tif (pass) validatePass = true;\n\t\t\t\t});\n\t\t\t\tif (!validatePass) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet params = this.subForm;\n\t\t\t\tparams.labelIdList = this.labelIdValue.join(',');\n\t\t\t\tif (this.editTargetId) {\n\t\t\t\t\tthis.updateTarget(params);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tajaxPostCommon(ajaxUrl.saveCrawler, params).then((data) => {\n\t\t\t\t\tif (data.returnCode === '200') {\n\t\t\t\t\t\tthis.cancelDialog();\n\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tmessage: data.returnMsg,\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\teditTarget(scope) {\n\t\t\t\tajaxPostCommon(ajaxUrl.getCrawlerDetail, {id: scope.id}).then((data) => {\n\t\t\t\t\tif (data.returnCode === '200') {\n\t\t\t\t\t\tlet nowData = data.result;\n\t\t\t\t\t\tObject.keys(this.subForm).forEach((key) => {\n\t\t\t\t\t\t\tthis.subForm[key] = nowData[key];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet arr = nowData.labelIds.split(',');\n\t\t\t\t\t\tthis.labelIdValue = arr.map((value) => {\n\t\t\t\t\t\t\treturn parseInt(value)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.openDialog();\n\t\t\t\t\t\tthis.editTargetId = nowData.id;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tupdateTarget(params) {\n\t\t\t\tparams.crawlerTargetId = this.editTargetId;\n\t\t\t\tajaxPostCommon(ajaxUrl.updateCrawler, params).then((data) => {\n\t\t\t\t\tif (data.returnCode === '200') {\n\t\t\t\t\t\tthis.cancelDialog();\n\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tmessage: data.returnMsg,\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tdeleteTarget(scope) {\n\t\t\t\tthis.$confirm('确定删除选中记录么?', '提示', {}).then(() => {\n\t\t\t\t\tajaxPostCommon(ajaxUrl.deleteCrawler, {crawlerTargetId: scope.id}).then((data) => {\n\t\t\t\t\t\tif (data.returnCode === '200') {\n\t\t\t\t\t\t\tthis.cancelDialog();\n\t\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\tmessage: data.returnMsg,\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}).catch(() => {\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tdowork(scope) {\n\t\t\t\tlet params = {\n\t\t\t\t\ttargetId: scope.id\n\t\t\t\t}\n\t\t\t\tajaxPostCommon(ajaxUrl.doCrawler, params).then((data) => {\n\t\t\t\t\tif (data.returnCode === '200') {\n\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t}\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tmessage: data.returnMsg,\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t},\n\t\t\tchangePage(params) {\n\t\t\t\tthis.pageNum = params.page;\n\t\t\t\tthis.pageSize = params.rows || 10;\n\t\t\t\tthis.getList();\n\t\t\t},\n\t\t\taddNewTarget() {\n\t\t\t\tthis.editTargetId = null;\n\t\t\t\tthis.subForm = {\n\t\t\t\t\ttargetName: '',\n\t\t\t\t\ttargetUrl: '',\n\t\t\t\t\ttargetType: '',\n\t\t\t\t\thasNext: '',\n\t\t\t\t\tlabelIdList: '',\n\t\t\t\t\tdirectoryId: '',\n\t\t\t\t};\n\t\t\t\tthis.labelIdValue = [];\n\t\t\t\tthis.openDialog();\n\t\t\t},\n\t\t\thideDialog() {\n\t\t\t\tthis.$refs.form.clearValidate();\n\t\t\t},\n\t\t\topenDialog() {\n\t\t\t\tthis.dialogVisiblePage = true;\n\t\t\t},\n\t\t\tcancelDialog() {\n\t\t\t\tthis.dialogVisiblePage = false;\n\t\t\t},\n\t\t\thandleSelectionChange(selection) {\n\t\t\t\tthis.selectionRowData = selection\n\t\t\t}\n\t\t}\n\t};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/target/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('za-page-content',{attrs:{\"header\":\"爬虫目标管理\"}},[_c('za-table',{ref:\"table\",attrs:{\"data\":_vm.list,\"highlight-current-row\":\"\",\"total\":_vm.total},on:{\"action-change\":_vm.changePage,\"selection-change\":_vm.handleSelectionChange}},[_c('el-row',{staticClass:\"targetTit\",attrs:{\"slot\":\"searchBar\"},slot:\"searchBar\"},[_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"success\"},on:{\"click\":_vm.addNewTarget}},[_vm._v(\"添加爬虫目标\")])],1),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"targetUrl\",\"label\":\"爬取目标\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"爬取标签\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.labelList),function(item,index){return _c('span',{key:index},[_vm._v(_vm._s(item.labelName)+\",\")])})}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"280\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.dowork(scope.row)}}},[_vm._v(\"立即爬取\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.editTarget(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.deleteTarget(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"添加爬虫目标\",\"visible\":_vm.dialogVisiblePage,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.dialogVisiblePage=$event},\"close\":_vm.hideDialog}},[_c('el-row',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.subForm,\"rules\":_vm.formValidate,\"label-position\":\"left\",\"label-width\":\"120px\"}},[_c('el-row',[_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"目标名称\",\"prop\":\"targetName\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{model:{value:(_vm.subForm.targetName),callback:function ($$v) {_vm.$set(_vm.subForm, \"targetName\", $$v)},expression:\"subForm.targetName\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"目标url\",\"prop\":\"targetUrl\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{model:{value:(_vm.subForm.targetUrl),callback:function ($$v) {_vm.$set(_vm.subForm, \"targetUrl\", $$v)},expression:\"subForm.targetUrl\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"目标类型\",\"prop\":\"targetType\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.subForm.targetType),callback:function ($$v) {_vm.$set(_vm.subForm, \"targetType\", $$v)},expression:\"subForm.targetType\"}},_vm._l((_vm.options1),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"抓取下一页\",\"prop\":\"hasNext\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.subForm.hasNext),callback:function ($$v) {_vm.$set(_vm.subForm, \"hasNext\", $$v)},expression:\"subForm.hasNext\"}},_vm._l((_vm.options2),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"标签\",\"prop\":\"labelIdValue\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"multiple\":\"\",\"filterable\":\"\",\"allow-create\":\"\",\"default-first-option\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.labelIdValue),callback:function ($$v) {_vm.labelIdValue=$$v},expression:\"labelIdValue\"}},_vm._l((_vm.tagOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"栏目编号\",\"prop\":\"directoryId\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.subForm.directoryId),callback:function ($$v) {_vm.$set(_vm.subForm, \"directoryId\", $$v)},expression:\"subForm.directoryId\"}},_vm._l((_vm.colmnOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1)],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",staticStyle:{\"margin-top\":\"30px\"}},[_c('el-button',{on:{\"click\":_vm.cancelDialog}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveTarget}},[_vm._v(\"确 定\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a8ecf63a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/target/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a8ecf63a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a8ecf63a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a8ecf63a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/target/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}