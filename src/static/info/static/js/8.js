webpackJsonp([8],{A71Z:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),l=a.n(i),n=a("xVjy"),s=a("t5DY"),r=a("myXI"),o={data:function(){return{selectionRowData:[],articles:[],totalArticleNum:1,filters:{directoryId:"",origin:"",title:"",timeRange:null},colunm:[],origins:[],loadingTable:!1,pageConfig:{pageNum:1,pageSize:10,directoryId:"",origin:"",title:"",publishTimeStart:"",publishTimeEnd:""}}},created:function(){var e=this;Object(s.a)(r.getListInfoDirectory).then(function(t){e.colunm=t.result,e.colunm.unshift({directoryName:"全部"})}),Object(s.a)(r.getListOrigin).then(function(t){e.origins=t.result,e.origins.unshift("全部")}),this.initData()},methods:{filter:function(){var e=this.filters.timeRange?this.filters.timeRange[0]:"",t=this.filters.timeRange?this.filters.timeRange[1]:"";this.pageConfig=l()({},this.pageConfig,this.filters,{publishTimeStart:e,publishTimeEnd:t,pageNum:1}),delete this.pageConfig.timeRange,this.$refs.table.resetCurrentPage()||this.initData()},initData:function(){var e=this;this.loadingTable=!0,Object(s.a)(r.getInfoList,l()({},this.pageConfig)).then(function(t){e.articles=t.result.list,e.totalArticleNum=t.result.total,e.loadingTable=!1})},formatterDate:function(e,t,a){return Object(n.a)(a)},handlePass:function(e,t){var a=this,i=t?t.id:this.parseSelected();if(!i)return this.$message({showClose:!0,type:"error",message:"请选择文章"}),!1;this.$confirm("确定通过审核么?","提示",{}).then(function(){Object(s.a)(r.passUncheckedArticle,{list:i}).then(function(e){200==e.returnCode&&(a.$message({showClose:!0,message:"通过!",type:"success"}),a.initData())})}).catch(function(){})},handleDelete:function(e,t){var a=this,i=t?t.id:this.parseSelected();if(!i)return this.$message({showClose:!0,type:"error",message:"请选择文章"}),!1;this.$confirm("确定删除该资讯么?","提示",{}).then(function(){Object(s.a)(r.deleteUncheckedArticle,{list:i}).then(function(e){a.$message({showClose:!0,message:"删除成功!",type:"success"}),a.initData()})}).catch(function(){})},handleSelectionChange:function(e){this.selectionRowData=e},parseSelected:function(){var e=[];return this.selectionRowData.forEach(function(t){e.push(t.id)}),e.join(",")},changePage:function(e){var t={pageNum:e.page,pageSize:e.rows||this.pageConfig.pageSize};this.pageConfig=l()({},this.pageConfig,t),this.initData()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("za-page-content",{attrs:{header:"爬取图文审核",scroll:"true"}},[a("za-table",{ref:"table",attrs:{data:e.articles,total:e.totalArticleNum,isLoading:e.loadingTable},on:{"action-change":e.changePage,"selection-change":e.handleSelectionChange}},[a("el-col",{staticStyle:{"padding-bottom":"0px"},attrs:{slot:"searchBar",span:24},slot:"searchBar"},[a("el-form",{ref:"filtersForm",attrs:{model:e.filters}},[a("el-form-item",[a("el-col",{attrs:{span:8}},[a("el-col",{attrs:{span:8}},[e._v("来源:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.filters.origin,callback:function(t){e.$set(e.filters,"origin",t)},expression:"filters.origin"}},e._l(e.origins,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8,offset:4}},[a("el-col",{attrs:{span:8}},[e._v("所属栏目:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.filters.directoryId,callback:function(t){e.$set(e.filters,"directoryId",t)},expression:"filters.directoryId"}},e._l(e.colunm,function(e){return a("el-option",{key:e.directoryId,attrs:{label:e.directoryName,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-form-item",[a("el-col",{attrs:{span:8}},[a("el-col",{attrs:{span:8}},[e._v("标题:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{placeholder:"搜索标题..."},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.filter(t)}},model:{value:e.filters.title,callback:function(t){e.$set(e.filters,"title",t)},expression:"filters.title"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8,offset:4}},[a("el-col",{attrs:{span:8}},[e._v("发布时间:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.filters.timeRange,callback:function(t){e.$set(e.filters,"timeRange",t)},expression:"filters.timeRange"}})],1)],1)],1),e._v(" "),a("el-form-item",[a("el-col",{attrs:{span:10}},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.filter}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.handlePass}},[e._v("批量通过")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.handleDelete}},[e._v("批量删除")])],1)],1)],1)],1),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"origin",label:"来源"}}),e._v(" "),a("el-table-column",{attrs:{prop:"requestUrl",label:"来源链接"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:t.row.requestUrl,target:"_Blank"}},[e._v(e._s(t.row.requestUrl))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"directoryName",label:"所属栏目",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"crawlerTime",width:"160",formatter:e.formatterDate,label:"爬取时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"publishTime",width:"160",formatter:e.formatterDate,label:"发布时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.handlePass(t.$index,t.row)}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(o,c,!1,function(e){a("NsmE")},"data-v-eaf9da6e",null);t.default=u.exports},NsmE:function(e,t){}});
//# sourceMappingURL=8.js.map