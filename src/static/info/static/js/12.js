webpackJsonp([12],{"lo9+":function(e,t){},uUW4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s("woOf"),r=s.n(l),a=s("Dd8w"),o=s.n(a),i=s("t5DY"),n=s("NYxO"),u=s("myXI"),c={data:function(){return{ajaxUrl:u,formValidate:{directoryName:{required:!0,message:"请输入栏目名称",trigger:"blur"},sort:{required:!0,message:"请输入栏目顺序",trigger:"blur"},status:{required:!0,message:"请输入状态",trigger:"blur"},directoryCode:{required:!0,message:"请输入栏目Code",trigger:"blur"},isVisual:{required:!0,message:"请选择是否可见",trigger:"blur"},color:{required:!0,message:"请选择颜色",trigger:"blur"},coverImage:{required:!0,message:"请上传封面图",trigger:"blur"}},selectionRowData:[],dialogVisiblePage:!1,subForm:{directoryName:"",sort:"",status:"",isVisual:"",color:"",coverImage:""},editId:null,options:[{value:"01",label:"上线"},{value:"02",label:"下线"}],isVisualList:[{value:"Y",label:"是"},{value:"N",label:"否"}],value:"",list:[]}},mounted:function(){this.getList()},methods:o()({},Object(n.b)(["initSideMenu"]),{getList:function(){var e=this;Object(i.a)(u.listInfoDirectory,{pageNum:1,pageSize:100}).then(function(t){"200"===t.returnCode&&(e.list=t.result)})},saveColumn:function(){var e=this,t=!1;if(this.$refs.form.validate(function(e){e&&(t=!0)}),!t)return!1;if(this.editId)this.updateColumn();else{var s=this.subForm;s.sort=parseInt(s.sort),Object(i.a)(u.saveInfoDirectory,this.subForm).then(function(t){"200"===t.returnCode?(e.cancelDialog(),e.$message({message:"保存成功~",type:"success"}),e.getList(),e.updateSilder()):(e.cancelDialog(),e.$message({message:t.returnMsg,type:"error"}))})}},editColumn:function(e){var t=this;Object(i.a)(u.getInfoDirectoryById,{directoryId:e.id}).then(function(e){if("200"===e.returnCode){var s=e.result;t.subForm={directoryName:s.directoryName,directoryCode:s.directoryCode,sort:s.sort,status:s.status,isVisual:s.isVisual,color:s.color,coverImage:s.coverImage},t.editId=s.id,t.openDialog()}else t.$message({message:"查询失败~",type:"error"})})},updateColumn:function(){var e=this,t=r()(this.subForm,{directoryId:this.editId});t.sort=parseInt(t.sort),Object(i.a)(u.updateInfoDirectory,t).then(function(t){"200"===t.returnCode?(e.cancelDialog(),e.$message({message:"保存成功~",type:"success"}),e.getList(),e.updateSilder()):(e.cancelDialog(),e.$message({message:"保存失败~",type:"error"}))})},deleteColumn:function(e){var t=this;this.$confirm("确定删除该栏目?","提示",{}).then(function(){Object(i.a)(u.deleteInfoDirectory,{directoryId:e.id}).then(function(e){"200"===e.returnCode?(t.$message({message:"删除成功~",type:"success"}),t.getList(),t.updateSilder()):t.$message({message:e.returnMsg,type:"error"})})}).catch(function(){})},handleAvatarSuccess:function(e){this.subForm.coverImage=e.result},updateSilder:function(){var e=this;Object(i.a)(u.sideMenu).then(function(t){e.initSideMenu(t.result.menuList)})},addNewColumn:function(){this.editId=null,this.subForm={directoryName:"",sort:"",status:""},this.openDialog()},openDialog:function(){this.dialogVisiblePage=!0},hideDialog:function(){this.$refs.form.clearValidate()},cancelDialog:function(){this.dialogVisiblePage=!1},statusText:function(e){return{"01":"上线","02":"下线"}[e.row.status]},handleSelectionChange:function(e){this.selectionRowData=e}})},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("za-page-content",{attrs:{header:"栏目管理",scroll:"true"}},[s("el-row",{staticClass:"targetTit"},[s("el-button",{attrs:{size:"medium",type:"success"},on:{click:e.addNewColumn}},[e._v("添加栏目")])],1),e._v(" "),s("za-table",{ref:"table",attrs:{data:e.list,"highlight-current-row":"",total:0},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{prop:"sort",label:"排序"}}),e._v(" "),s("el-table-column",{attrs:{prop:"directoryCode",label:"栏目Code"}}),e._v(" "),s("el-table-column",{attrs:{prop:"directoryName",label:"栏目名称"}}),e._v(" "),s("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-col",[e._v(e._s(e.statusText(t)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"是否在资讯板块可见"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t"+e._s("Y"===t.row.isVisual?"是":"否")+"\n\t\t\t")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){e.editColumn(t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.deleteColumn(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:"添加栏目",visible:e.dialogVisiblePage,width:"500px"},on:{"update:visible":function(t){e.dialogVisiblePage=t},close:e.hideDialog}},[s("el-row",[s("el-form",{ref:"form",attrs:{model:e.subForm,rules:e.formValidate,"label-position":"left","label-width":"120px"}},[s("el-row",[s("el-row",{attrs:{type:"flex",align:"middle"}},[s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"栏目名称",prop:"directoryName"}},[s("el-col",{attrs:{span:20}},[s("el-input",{model:{value:e.subForm.directoryName,callback:function(t){e.$set(e.subForm,"directoryName",t)},expression:"subForm.directoryName"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",align:"middle"}},[s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"排序",prop:"sort"}},[s("el-col",{attrs:{span:20}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.subForm.sort,callback:function(t){e.$set(e.subForm,"sort",t)},expression:"subForm.sort"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",align:"middle"}},[s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"状态",prop:"status"}},[s("el-col",{attrs:{span:20}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.subForm.status,callback:function(t){e.$set(e.subForm,"status",t)},expression:"subForm.status"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",align:"middle"}},[s("span",{staticClass:"isVisual-tip"},[e._v("注: 在资讯版块内")]),e._v(" "),s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"是否可见",prop:"isVisual"}},[s("el-col",{attrs:{span:20}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.subForm.isVisual,callback:function(t){e.$set(e.subForm,"isVisual",t)},expression:"subForm.isVisual"}},e._l(e.isVisualList,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",align:"middle"}},[s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"栏目Code",prop:"directoryCode"}},[s("el-col",{attrs:{span:20}},[s("el-input",{model:{value:e.subForm.directoryCode,callback:function(t){e.$set(e.subForm,"directoryCode",t)},expression:"subForm.directoryCode"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",align:"middle"}},[s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"封面图",prop:"coverImage"}},[s("el-col",{attrs:{span:20}},[s("div",{staticClass:"img-tip",staticStyle:{color:"red"}},[e._v("* 建议宽高比200:120")]),e._v(" "),s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.ajaxUrl.baseUrl+e.ajaxUrl.uploadArticleImage,data:{allowCors:2},"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.subForm.coverImage?s("img",{staticClass:"avatar",attrs:{src:e.subForm.coverImage}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",align:"middle"}},[s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"专题颜色",prop:"color"}},[s("el-col",{attrs:{span:20}},[s("el-color-picker",{model:{value:e.subForm.color,callback:function(t){e.$set(e.subForm,"color",t)},expression:"subForm.color"}})],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.cancelDialog}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"success"},on:{click:e.saveColumn}},[e._v("确 定")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var m=s("VU/8")(c,d,!1,function(e){s("lo9+")},"data-v-6cf37bfe",null);t.default=m.exports}});
//# sourceMappingURL=12.js.map