webpackJsonp([10],{AboZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),s=a.n(l),i=a("Dd8w"),n=a.n(i),o=a("t5DY"),r=a("myXI"),c={data:function(){return{formValidate:{labelName:{required:!0,message:"请输入标签",trigger:"blur"},targetUrl:{required:!0,message:"请输入爬取目标url",trigger:"blur"},targetType:{required:!0,message:"请输入目标类型",trigger:"blur"},directoryId:{required:!0,message:"请输入栏目编号",trigger:"blur"}},authStatusList:[{label:"全部",value:""},{label:"未审核",value:"0"},{label:"已审核",value:"1"}],filters:{authStatus:"",labelName:"",isRecommend:""},selectionRowData:[],dialogType:"",dialogVisiblePage:!1,subEdit:{labelName:"",isRecommend:"N"},labelId:null,cate:null,list:[],total:1,pageNum:1,pageSize:10}},mounted:function(){this.getList()},methods:{getOption:function(){var e=this;Object(o.a)(r.pageInfoLabelCategory,{pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){console.log(t),"200"===t.returnCode&&(e.options=e.formateCate(t.result.list),e.cate=e.options[0].value,e.getList())})},formateCate:function(e){var t=[];return e.forEach(function(e){var a={value:e.labelCategoryId,label:e.labelCategoryName};t.push(a)}),console.log(t),t},getList:function(){var e=this;Object(o.a)(r.pageInfoLabel,n()({pageNum:this.pageNum,pageSize:this.pageSize},this.filters)).then(function(t){"200"===t.returnCode&&(e.list=t.result.list,e.total=t.result.total)})},changeCate:function(){this.getList()},editTag:function(e){var t=this;this.dialogType="edit",Object(o.a)(r.getInfoLabelDetail,{labelId:e.id}).then(function(e){if("200"===e.returnCode){var a=e.result;t.subEdit={labelName:a.labelName,isRecommend:a.isRecommend},t.openDialog(),t.labelId=a.labelId}})},saveTag:function(){var e=this,t=!1;if(this.$refs.form.validate(function(e){console.log(e),e&&(t=!0)}),!t)return!1;var a={labelName:this.subEdit.labelName,isRecommend:this.subEdit.isRecommend};this.labelId?this.updateTag(a):Object(o.a)(r.saveInfoLabel,a).then(function(t){"200"===t.returnCode&&(e.cancelDialog(),e.$message({message:"保存成功~",type:"success"}),e.getList())})},updateTag:function(e){var t=this,a=s()(e,{labelId:this.labelId});Object(o.a)(r.updateInfoLabel,a).then(function(e){"200"===e.returnCode&&(t.cancelDialog(),t.$message({message:"保存成功~",type:"success"}),t.getList())})},deleteTag:function(e){var t=this;this.$confirm("确定删除选中标签么?","提示",{}).then(function(){Object(o.a)(r.deleteInfoLabel,{labelId:e.id}).then(function(e){"200"===e.returnCode?(t.$message({message:"删除成功~",type:"success"}),t.getList()):t.$message({message:e.returnMsg,type:"error"})})}).catch(function(){})},batchAction:function(e){var t,a=this,l=[],s=null,i="",n="";if(this.selectionRowData.forEach(function(e){l.push(e.id)}),!(t=l.join(",")))return this.$message({showClose:!0,message:"请选择标签",type:"error"}),!1;"pass"===e?(s=r.batchPassTags,i="确定审核通过?",n="通过成功"):(s=r.batchDelTags,i="确定删除?",n="删除成功"),this.$confirm(i,"提示",{}).then(function(){Object(o.a)(s,{list:t}).then(function(e){200==e.returnCode?(a.$message({showClose:!0,message:n,type:"success"}),a.getList()):a.$message({showClose:!0,message:e.returnMsg,type:"error"})})})},shenheTag:function(e){var t=this;this.$confirm("确定审核选中标签么?","提示",{}).then(function(){Object(o.a)(r.updateAuthStatus,{labelId:e.id}).then(function(e){"200"===e.returnCode?(t.$message({message:"审核成功~",type:"success"}),t.getList()):t.$message({message:e.returnMsg,type:"error"})})}).catch(function(){})},addNewTag:function(){this.subEdit={labelName:"",isRecommend:"N"},this.labelId=null,this.dialogType="add",this.openDialog()},openDialog:function(){this.dialogVisiblePage=!0},hideDialog:function(){this.$refs.form.clearValidate()},cancelDialog:function(){this.dialogVisiblePage=!1},changePage:function(e){this.pageNum=e.page,this.pageSize=e.rows||10,this.getList()},handleSelectionChange:function(e){this.selectionRowData=e},changeRecommend:function(e){this.filters.isRecommend=e?"Y":""}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("za-page-content",{attrs:{header:"标签管理",scroll:"true"}},[a("za-table",{ref:"table",attrs:{data:e.list,"highlight-current-row":"",total:e.total},on:{"action-change":e.changePage,"selection-change":e.handleSelectionChange}},[a("div",{attrs:{slot:"searchBar"},slot:"searchBar"},[a("el-form",{ref:"filtersForm",attrs:{model:e.filters}},[a("el-form-item",[a("el-col",{attrs:{span:6}},[a("el-col",{attrs:{span:8}},[e._v("审核状态:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.filters.authStatus,callback:function(t){e.$set(e.filters,"authStatus",t)},expression:"filters.authStatus"}},e._l(e.authStatusList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:7,offset:1}},[a("el-col",{attrs:{span:8}},[e._v("标签查询:")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{placeholder:"搜索标签...",clearable:!0},model:{value:e.filters.labelName,callback:function(t){e.$set(e.filters,"labelName",t)},expression:"filters.labelName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4,offset:1}},[a("el-col",{attrs:{span:16}},[a("el-checkbox",{on:{change:e.changeRecommend}},[e._v("运营推荐")])],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.getList}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{slot:"searchBar"},slot:"searchBar"},[a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"medium",type:"primary"},on:{click:e.addNewTag}},[e._v("添加标签")]),e._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"medium",type:"success"},on:{click:function(t){e.batchAction("pass")}}},[e._v("批量审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"medium",type:"danger"},on:{click:function(t){e.batchAction("del")}}},[e._v("批量删除")])],1),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"labelName",label:"标签"}}),e._v(" "),a("el-table-column",{attrs:{label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s("1"===t.row.authStatus?"已审核":"未审核")+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否运营推荐",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s("Y"===t.row.isRecommend?"是":"否")+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.shenheTag(t.row)}}},[e._v("审核")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.editTag(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.deleteTag(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"add"===e.dialogType?"添加标签":"编辑标签",visible:e.dialogVisiblePage,width:"500px"},on:{"update:visible":function(t){e.dialogVisiblePage=t},close:e.hideDialog}},[a("el-row",[a("el-row",[a("el-form",{ref:"form",attrs:{model:e.subEdit,rules:e.formValidate,"label-position":"left","label-width":"120px"}},[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"add"===e.dialogType,expression:"dialogType==='add'"}],staticClass:"tags-trip"},[e._v("注：多个标签使用英文“,”隔开")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"标签",prop:"labelName"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:e.subEdit.labelName,callback:function(t){e.$set(e.subEdit,"labelName",t)},expression:"subEdit.labelName"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"是否推荐给用户",prop:"isRecommend"}},[a("el-col",{attrs:{span:20}},[a("el-radio",{attrs:{label:"Y"},model:{value:e.subEdit.isRecommend,callback:function(t){e.$set(e.subEdit,"isRecommend",t)},expression:"subEdit.isRecommend"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"N"},model:{value:e.subEdit.isRecommend,callback:function(t){e.$set(e.subEdit,"isRecommend",t)},expression:"subEdit.isRecommend"}},[e._v("否")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:e.cancelDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveTag}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("x1Y1")},"data-v-a0f2ea2c",null);t.default=d.exports},x1Y1:function(e,t){}});
//# sourceMappingURL=10.js.map