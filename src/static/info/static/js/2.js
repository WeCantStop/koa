webpackJsonp([2],{"1JFL":function(t,e){},"9bBU":function(t,e,a){a("mClu");var i=a("FeBl").Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},C4MV:function(t,e,a){t.exports={default:a("9bBU"),__esModule:!0}},bOdI:function(t,e,a){"use strict";e.__esModule=!0;var i,r=a("C4MV"),l=(i=r)&&i.__esModule?i:{default:i};e.default=function(t,e,a){return e in t?(0,l.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},bvSr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("bOdI"),r=a.n(i),l=a("Dd8w"),s=a.n(l),n=a("t5DY"),o=a("myXI"),u=a("PJh5"),c=a.n(u),d={data:function(){return{ajaxUrl:o,dialogTitle:"",submitData:{type:"00",coverImage:"",dateTimeRange:[]},formValidate:{name:[{required:!0,message:"请输入广告名称",trigger:"blur"},{max:40,message:"最多40个字",trigger:"blur"}],dateTimeRange:[{required:!0,message:"请选择有效期",trigger:"blur"}],coverImage:[{required:!0,message:"请选择广告图",trigger:"blur"}],url:[{required:!0,message:"请填写超链接",trigger:"blur"}],weight:[{required:!0,message:"请输入广告权重",trigger:"blur"}]},typeList:[{label:"信息流广告",value:"00"}],dialogVisible:!1}},methods:{show:function(t){this.submitData=this.parseData(t)||this.submitData,this.dialogVisible=!0},parseData:function(t){if(!t)return this.dialogTitle="新建广告",!1;this.dialogTitle="编辑广告";var e="YYYY-MM-DD HH:mm:ss",a=[c()(t.gmtValidityStart).format(e),c()(t.gmtValidityEnd).format(e)];return s()({},t,{dateTimeRange:a})},hide:function(){this.submitData={},this.$refs.form.resetFields(),this.dialogVisible=!1},parseSubmitData:function(t){var e="YYYY:MM:DD HH:mm:ss";return t.dateTimeRange=[c()(t.gmtValidityStart).format(e),c()(t.gmtValidityEnd).format(e)],t},ctrlSubmitData:function(t){return t.gmtValidityStart=t.dateTimeRange[0],t.gmtValidityEnd=t.dateTimeRange[1],delete t.dateTimeRange,t},validateForm:function(){var t=!1;return this.$refs.form.validate(function(e){e&&(t=!0)}),t},saveOrUpdate:function(){var t=this;if(!this.validateForm())return!1;Object(n.a)(o.saveOrUpdateAd,this.ctrlSubmitData(this.submitData)).then(function(e){"200"===e.returnCode?(t.hide(),t.$emit("saveOrUpdate")):t.$message({message:e.returnMsg,type:"error"})})},handleAvatarSuccess:function(t,e){this.submitData.coverImage=t.result}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.hide}},[a("el-form",{ref:"form",attrs:{model:t.submitData,rules:t.formValidate,"label-position":"left","label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"广告样式:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择广告样式"},model:{value:t.submitData.type,callback:function(e){t.$set(t.submitData,"type",e)},expression:"submitData.type"}},t._l(t.typeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"广告名称:",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入广告名称"},model:{value:t.submitData.name,callback:function(e){t.$set(t.submitData,"name",e)},expression:"submitData.name"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"有效期:",prop:"dateTimeRange"}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",align:"right"},model:{value:t.submitData.dateTimeRange,callback:function(e){t.$set(t.submitData,"dateTimeRange",e)},expression:"submitData.dateTimeRange"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"广告权重:",prop:"weight"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入广告权重"},model:{value:t.submitData.weight,callback:function(e){t.$set(t.submitData,"weight",e)},expression:"submitData.weight"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"广告配图:",prop:"coverImage"}},[a("div",{staticClass:"img-tip",staticStyle:{color:"red"}},[t._v("* 建议宽高比690:290")]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.ajaxUrl.baseUrl+t.ajaxUrl.uploadArticleImage,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.submitData.coverImage?a("img",{staticClass:"avatar",attrs:{src:t.submitData.coverImage}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"超链接:",prop:"url"}},[a("el-input",{attrs:{placeholder:"请输入超链接地址"},model:{value:t.submitData.url,callback:function(e){t.$set(t.submitData,"url",e)},expression:"submitData.url"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer",align:"center"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.hide}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.saveOrUpdate}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var f,g=a("VU/8")(d,m,!1,function(t){a("1JFL")},"data-v-79e27f22",null).exports,p=a("xVjy"),b={components:{AddOrEditDialog:g},data:function(){return{filters:{status:""},status:[{label:"全部",value:""},{label:"下线",value:"01"},{label:"上线",value:"02"}],list:[],selectionRowData:[],pageConfig:{pageNum:1,pageSize:10,total:1}}},created:function(){this.initData()},methods:(f={formatterDate:p.a,initData:function(){var t=this;Object(n.a)(o.advertisementList,s()({},this.pageConfig,this.filters)).then(function(e){"200"===e.returnCode&&(t.list=e.result.list,t.pageConfig.total=e.result.total)})},filter:function(){var t=this.filters.dateTimeRange?this.filters.dateTimeRange[0]:"",e=this.filters.dateTimeRange?this.filters.dateTimeRange[1]:"";this.pageConfig=s()({},this.pageConfig,this.filters,{gmtValidityStart:t,gmtValidityEnd:e,pageNum:1}),this.$refs.table.resetCurrentPage()||this.initData()},changePage:function(t){var e={pageNum:t.page,pageSize:t.rows||this.pageConfig.pageSize};this.pageConfig=s()({},this.pageConfig,e),this.initData()},addAdvertise:function(){this.$refs.addOrEditDialog.show()},saveOrUpdate:function(){this.$message({message:"成功!",type:"success"}),this.initData()},handleSelectionChange:function(t){this.selectionRowData=t}},r()(f,"formatterDate",function(t,e,a){return Object(p.a)(a)||"无"}),r()(f,"onlineOrOffline",function(t,e){var a=this,i={id:t,status:e};Object(n.a)(o.onlineOrOfflineAd,i).then(function(t){"200"===t.returnCode?a.initData():a.$message({message:t.returnMsg,type:"error"})})}),r()(f,"editAd",function(t){this.$refs.addOrEditDialog.show(t)}),r()(f,"deleteAd",function(t){var e=this;this.$confirm("确定删除广告么?","提示",{}).then(function(){Object(n.a)(o.deleteAd,{id:t}).then(function(t){"200"===t.returnCode?(e.initData(),e.$message({message:"删除成功",type:"success"})):e.$message({message:t.returnMsg,type:"error"})})}).catch(function(){})}),f)},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("za-page-content",{attrs:{header:"广告管理"}},[a("za-table",{ref:"table",attrs:{data:t.list,"highlight-current-row":"",total:t.pageConfig.total},on:{"action-change":t.changePage,"selection-change":t.handleSelectionChange}},[a("div",{staticStyle:{"padding-bottom":"0px"},attrs:{slot:"searchBar"},slot:"searchBar"},[a("el-form",{ref:"filtersForm",attrs:{model:t.filters}},[a("el-form-item",[a("el-col",{attrs:{span:8}},[a("el-col",{attrs:{span:6}},[t._v("状态:")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}},t._l(t.status,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-col",{attrs:{span:3}},[t._v("有效期:")]),t._v(" "),a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:t.filters.dateTimeRange,callback:function(e){t.$set(t.filters,"dateTimeRange",e)},expression:"filters.dateTimeRange"}})],1)],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"},attrs:{slot:"searchBar"},slot:"searchBar"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:t.filter}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:"success"},on:{click:t.addAdvertise}},[t._v("新建广告")])],1),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"广告ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"广告样式"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        信息流广告\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"广告名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gmtValidityStart",label:"开始时间",formatter:t.formatterDate}}),t._v(" "),a("el-table-column",{attrs:{prop:"gmtValidityEnd",label:"结束时间",formatter:t.formatterDate}}),t._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s("01"===e.row.status?"下线":"上线")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return["01"===e.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.onlineOrOffline(e.row.id,"02")}}},[t._v("上线")]):t._e(),t._v(" "),"02"===e.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.onlineOrOffline(e.row.id,"01")}}},[t._v("下线")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.editAd(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteAd(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("add-or-edit-dialog",{ref:"addOrEditDialog",on:{saveOrUpdate:t.saveOrUpdate}})],1)},staticRenderFns:[]},h=a("VU/8")(b,v,!1,null,null,null);e.default=h.exports},mClu:function(t,e,a){var i=a("kM2E");i(i.S+i.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})}});
//# sourceMappingURL=2.js.map